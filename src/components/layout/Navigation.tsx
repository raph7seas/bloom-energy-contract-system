import React from 'react';
import { Button } from '../ui/button';
import { Badge } from '../ui/badge';
import { cn } from '../../lib/utils';
import { useAuth } from '../../contexts/AuthContext';
import {
  Plus, Database, Brain, BarChart3, FileText, Settings, Users,
  Building, Calendar, TrendingUp, Eye, Sparkles, Library, Hash,
  Monitor, Package, Wrench, Grid3X3, Home, User
} from 'lucide-react';

interface NavigationProps {
  activeView: string;
  onViewChange: (view: string) => void;
}

export const Navigation: React.FC<NavigationProps> = ({ activeView, onViewChange }) => {
  const { user, logout } = useAuth();

  const handleLogout = async () => {
    await logout();
  };
  const navigationItems = [
    {
      id: 'create',
      label: 'Create Contract',
      icon: Plus,
    },
    {
      id: 'dashboard',
      label: 'Dashboard',
      icon: Home,
    },
    {
      id: 'library',
      label: 'Contract Library',
      icon: Library,
    },
    // {
    //   id: 'compare',
    //   label: 'Compare Contracts',
    //   icon: Eye,
    // },
    // {
    //   id: 'ai-assistant',
    //   label: 'AI Assistant',
    //   icon: Brain,
    // },
    {
      id: 'analytics',
      label: 'Analytics',
      icon: BarChart3,
    },
    {
      id: 'documents',
      label: 'Document Upload',
      icon: FileText,
    },
    // {
    //   id: 'templates',
    //   label: 'Templates',
    //   icon: Building,
    // },
    {
      id: 'rules',
      label: 'Rules Engine',
      icon: Settings,
    }
  ];

  return (
    <div className="w-72 p-4 h-full" style={{ backgroundColor: '#f5f5f5' }}>
      <nav className="h-full bg-white rounded-2xl flex flex-col shadow-sm">
        {/* Header with Logo */}
        <div className="p-6 pb-4">
          <svg width="143" height="24" viewBox="0 0 143 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g clipPath="url(#clip0_4959_10095)">
              <path d="M17.3643 17.4551C15.3752 17.4551 14.085 16.4733 14.085 14.1278V0.21875H17.0417V13.6369C17.0417 14.346 17.203 14.8369 18.2244 14.8369C18.4932 14.8369 18.547 14.8369 18.7083 14.8369V17.2915C18.0632 17.4006 17.9556 17.4551 17.3643 17.4551Z" fill="#1F3045"/>
              <path d="M27.2023 8.07337C26.826 7.637 26.1809 7.30973 25.3745 7.30973C24.5681 7.30973 23.923 7.69155 23.5467 8.07337C22.8478 8.837 22.6865 10.037 22.6865 11.1825C22.6865 12.3279 22.8478 13.4734 23.5467 14.2915C23.923 14.7279 24.5681 15.0552 25.3745 15.0552C26.1809 15.0552 26.826 14.7279 27.2023 14.2915C27.9012 13.5279 28.0624 12.3825 28.0624 11.1825C28.0624 9.98246 27.9012 8.837 27.2023 8.07337ZM29.6215 15.7097C28.7613 16.7461 27.2023 17.6188 25.3745 17.6188C23.5467 17.6188 21.9876 16.7461 21.1275 15.7097C20.2136 14.5643 19.7297 13.2552 19.7297 11.1825C19.7297 9.10973 20.2136 7.80064 21.1275 6.65518C21.9876 5.61882 23.5467 4.74609 25.3745 4.74609C27.2023 4.74609 28.7613 5.61882 29.6215 6.65518C30.5354 7.80064 31.0192 9.10973 31.0192 11.1825C31.0192 13.2006 30.5354 14.5097 29.6215 15.7097Z" fill="#1F3045"/>
              <path d="M39.997 8.07337C39.6207 7.637 38.9755 7.30973 38.1692 7.30973C37.3628 7.30973 36.7176 7.69155 36.3413 8.07337C35.6425 8.837 35.4812 10.037 35.4812 11.1825C35.4812 12.3279 35.6425 13.4734 36.3413 14.2915C36.7176 14.7279 37.3628 15.0552 38.1692 15.0552C38.9755 15.0552 39.6207 14.7279 39.997 14.2915C40.6958 13.5279 40.8571 12.3825 40.8571 11.1825C40.8571 9.98246 40.6958 8.837 39.997 8.07337ZM42.4161 15.7097C41.556 16.7461 39.997 17.6188 38.1692 17.6188C36.3413 17.6188 34.7823 16.7461 33.9222 15.7097C33.0082 14.5643 32.5244 13.2552 32.5244 11.1825C32.5244 9.10973 33.0082 7.80064 33.9222 6.65518C34.7823 5.61882 36.3413 4.74609 38.1692 4.74609C39.997 4.74609 41.556 5.61882 42.4161 6.65518C43.3301 7.80064 43.8139 9.10973 43.8139 11.1825C43.8139 13.2006 43.3301 14.5097 42.4161 15.7097Z" fill="#1F3045"/>
              <path d="M59.9956 17.2915V9.65518C59.9956 8.12791 59.6193 7.25518 58.114 7.25518C56.4475 7.25518 55.7486 9.00064 55.7486 10.5825V17.2915H52.8456V9.65518C52.8456 8.12791 52.4693 7.25518 50.964 7.25518C49.2975 7.25518 48.5449 9.00064 48.5449 10.5825V17.2915H45.6418V5.01882H48.061L48.2761 6.65518C48.9212 5.50973 50.1039 4.74609 51.7167 4.74609C53.437 4.74609 54.5659 5.50973 55.1573 6.76428C55.8561 5.50973 57.2001 4.74609 58.8129 4.74609C61.3933 4.74609 62.7373 6.49155 62.7373 9.05518V17.3461L59.9956 17.2915Z" fill="#1F3045"/>
              <path d="M73.1127 7.80064C72.7364 7.36427 72.0913 7.09155 71.2849 7.09155C70.4247 7.09155 69.6721 7.47337 69.242 8.01882C68.8119 8.56428 68.6507 9.10973 68.5969 9.92791H73.8116C73.8116 9.00064 73.5428 8.29155 73.1127 7.80064ZM76.7146 12.0552H68.6507C68.5969 12.9825 68.9732 13.9097 69.5108 14.4552C69.9409 14.837 70.5322 15.2188 71.2849 15.2188C72.145 15.2188 72.6289 15.0552 73.0589 14.6188C73.3277 14.3461 73.5428 14.0188 73.6503 13.5825H76.4458C76.392 14.2915 75.9082 15.2734 75.4243 15.8734C74.4029 17.1279 72.8977 17.6188 71.3386 17.6188C69.6721 17.6188 68.4894 17.0188 67.5217 16.0915C66.2852 14.8915 65.6401 13.2006 65.6401 11.1825C65.6401 9.21882 66.2315 7.47337 67.3604 6.27337C68.2743 5.34609 69.5646 4.74609 71.2311 4.74609C73.0052 4.74609 74.6717 5.45518 75.6394 7.037C76.4995 8.40064 76.7146 9.76428 76.6608 11.2915C76.7683 11.237 76.7146 11.837 76.7146 12.0552Z" fill="#3DAE2B"/>
              <path d="M86.3914 17.2914V9.76413C86.3914 8.34595 85.9076 7.47322 84.4023 7.47322C83.3809 7.47322 82.682 8.12777 82.3057 9.05504C81.8756 10.0369 81.9294 11.2914 81.9294 12.3278V17.346H79.0264V5.01868H81.4455L81.6606 6.6005C82.3594 5.29141 83.811 4.69141 85.2087 4.69141C87.7891 4.69141 89.2944 6.54595 89.2944 9.05504V17.2369H86.3914V17.2914Z" fill="#3DAE2B"/>
              <path d="M98.8637 7.80064C98.4874 7.36427 97.8423 7.09155 97.0359 7.09155C96.1758 7.09155 95.4231 7.47337 94.993 8.01882C94.563 8.56428 94.4017 9.10973 94.3479 9.92791H99.5626C99.5626 9.00064 99.3476 8.29155 98.8637 7.80064ZM102.466 12.0552H94.3479C94.3479 12.9825 94.6705 13.9097 95.2081 14.4552C95.6382 14.837 96.2295 15.2188 96.9821 15.2188C97.8423 15.2188 98.3261 15.0552 98.7562 14.6188C99.025 14.3461 99.24 14.0188 99.3476 13.5825H102.143C102.089 14.2915 101.605 15.2734 101.122 15.8734C100.1 17.1279 98.5949 17.6188 97.0359 17.6188C95.3694 17.6188 94.1867 17.0188 93.219 16.0915C92.0363 14.8915 91.3374 13.2006 91.3374 11.1825C91.3374 9.21882 91.9288 7.47337 93.0577 6.27337C93.9716 5.34609 95.2618 4.74609 96.9284 4.74609C98.7024 4.74609 100.369 5.45518 101.337 7.037C102.197 8.40064 102.412 9.76428 102.412 11.2915C102.519 11.237 102.466 11.837 102.466 12.0552Z" fill="#3DAE2B"/>
              <path d="M110.798 7.63729C108.755 7.63729 107.68 9.11001 107.68 11.1282V17.2918H104.723V5.01911H107.196L107.465 6.87365C108.002 5.45547 109.454 4.85547 110.905 4.85547C111.228 4.85547 111.497 4.91001 111.819 4.91001V7.74638C111.497 7.69183 111.121 7.63729 110.798 7.63729Z" fill="#3DAE2B"/>
              <path d="M117.733 6.92773C116.389 6.92773 115.583 7.90955 115.583 9.21864C115.583 10.5277 116.389 11.5096 117.733 11.5096C119.077 11.5096 119.884 10.5823 119.884 9.21864C119.884 7.90955 119.077 6.92773 117.733 6.92773ZM118.271 17.455H116.013C115.368 17.6732 114.938 18.1641 114.938 18.9823C114.938 20.5641 116.82 20.6732 118.002 20.6732C119.185 20.6732 121.228 20.6186 121.228 18.9823C121.174 17.455 119.346 17.455 118.271 17.455ZM118.056 23.0186C116.604 23.0186 115.045 22.9096 113.755 21.9823C112.841 21.3277 112.304 20.455 112.304 19.3096C112.304 18.2186 112.841 17.2914 113.755 16.8005C113.003 16.3641 112.573 15.4914 112.573 14.6732C112.573 13.6368 113.056 12.8186 114.024 12.2186C113.271 11.455 112.841 10.4732 112.841 9.21864C112.841 6.27319 115.099 4.69137 117.787 4.69137C118.809 4.69137 119.723 4.9641 120.529 5.45501C121.013 4.41864 121.98 3.92773 123.002 3.92773C123.163 3.92773 123.593 3.92773 123.808 3.98228V6.27319C123.754 6.27319 123.647 6.27319 123.593 6.27319C122.894 6.27319 122.303 6.49137 122.142 7.03682C122.518 7.69137 122.787 8.40046 122.787 9.27319C122.787 12.055 120.475 13.7459 117.841 13.7459C117.142 13.7459 116.497 13.6368 115.906 13.4186C115.637 13.5823 115.314 13.9096 115.314 14.2914C115.314 15.0005 116.013 15.2186 116.658 15.2186H118.647C119.884 15.2186 121.443 15.2186 122.572 16.0368C123.593 16.7459 124.023 17.7823 124.023 18.9823C123.916 22.1459 120.744 23.0186 118.056 23.0186Z" fill="#3DAE2B"/>
              <path d="M131.872 19.3629C131.281 20.9447 130.259 22.4174 128.163 22.4174C127.195 22.4174 126.55 22.2538 125.905 22.0902V19.6356C126.657 19.7993 126.872 19.8538 127.518 19.8538C128.055 19.8538 128.593 19.6902 128.915 18.9265L129.614 17.2356L124.83 4.96289H128.001L131.173 13.8538L134.184 4.96289H137.14L131.872 19.3629Z" fill="#3DAE2B"/>
              <path d="M6.23639 14.8371C4.78488 14.8371 3.7097 13.9643 3.60218 12.3825V9.87344H5.1612H5.96759C7.47285 9.87344 8.81684 10.6371 8.81684 12.3825C8.81684 13.9098 7.68789 14.8371 6.23639 14.8371ZM6.23639 2.89162C7.52661 2.89162 8.44052 3.87344 8.44052 5.07344C8.44052 6.60071 7.52661 7.3098 5.91383 7.3098H5.21496H3.54842V2.94616L6.23639 2.89162ZM9.1394 8.5098C10.5909 7.96435 11.5048 6.43707 11.5048 4.96435C11.5048 2.12798 9.24691 0.273438 6.29015 0.273438H0.75293V12.3825C0.806689 15.4371 3.22586 17.4553 6.23639 17.4553C9.30067 17.4553 11.7736 15.7098 11.7736 12.4371C11.7736 10.6916 10.8059 9.00071 9.1394 8.5098Z" fill="#1F3045"/>
              <path d="M140.527 5.94624C140.473 5.89169 140.366 5.89169 140.258 5.89169H140.151V6.43714H140.366C140.473 6.43714 140.581 6.43715 140.635 6.3826C140.688 6.32805 140.742 6.27351 140.742 6.16442C140.742 6.05533 140.635 5.94624 140.527 5.94624ZM139.613 7.47351V5.56442C139.721 5.56442 139.882 5.56442 140.151 5.56442C140.366 5.56442 140.527 5.56442 140.527 5.56442C140.688 5.56442 140.796 5.61896 140.903 5.67351C141.065 5.7826 141.172 5.94624 141.172 6.10987C141.172 6.27351 141.118 6.3826 141.065 6.43714C140.957 6.49169 140.85 6.54624 140.742 6.54624C140.85 6.54624 140.957 6.60078 141.011 6.65533C141.118 6.76442 141.172 6.87351 141.172 7.09169V7.25533V7.30987V7.36442V7.41896H140.688C140.688 7.36442 140.688 7.25533 140.635 7.14624C140.635 7.03715 140.635 6.92805 140.581 6.92805C140.581 6.87351 140.527 6.81896 140.42 6.76442C140.366 6.76442 140.312 6.70987 140.258 6.70987H140.151H140.043V7.36442H139.613V7.47351ZM139.398 5.50987C139.129 5.7826 138.968 6.10987 138.968 6.49169C138.968 6.87351 139.129 7.25533 139.398 7.52805C139.667 7.80078 139.989 7.96442 140.366 7.96442C140.742 7.96442 141.065 7.80078 141.333 7.52805C141.602 7.25533 141.764 6.92805 141.764 6.49169C141.764 6.10987 141.602 5.7826 141.333 5.50987C141.065 5.23715 140.742 5.07351 140.366 5.07351C139.989 5.07351 139.667 5.23715 139.398 5.50987ZM141.548 7.74624C141.226 8.07351 140.796 8.23715 140.366 8.23715C139.882 8.23715 139.506 8.07351 139.183 7.74624C138.86 7.41896 138.699 6.9826 138.699 6.54624C138.699 6.05533 138.86 5.61896 139.237 5.29169C139.559 4.96442 139.936 4.80078 140.42 4.80078C140.903 4.80078 141.28 4.96442 141.602 5.29169C141.925 5.61896 142.086 6.05533 142.086 6.49169C142.086 6.9826 141.925 7.41896 141.548 7.74624Z" fill="#3DAE2B"/>
            </g>
            <defs>
              <clipPath id="clip0_4959_10095">
                <rect width="143" height="24" fill="white"/>
              </clipPath>
            </defs>
          </svg>
        </div>

        {/* Navigation Items */}
        <div className="flex-1 px-6 space-y-1">
          {navigationItems.map((item) => {
            const Icon = item.icon;
            const isActive = activeView === item.id;
            
            return (
              <button
                key={item.id}
                onClick={() => onViewChange(item.id)}
                className={cn(
                  "w-full flex items-center justify-between px-4 py-3 text-left rounded-lg transition-colors group",
                  item.id === 'create' && isActive
                    ? "bg-gray-900 text-white"
                    : isActive 
                    ? "bg-gray-50 text-gray-900" 
                    : item.id === 'create'
                    ? "hover:bg-gray-800 text-white bg-gray-900"
                    : "hover:bg-gray-50 text-gray-700"
                )}
              >
                <div className="flex items-center space-x-3">
                  <Icon className={cn(
                    "h-5 w-5",
                    item.id === 'create' ? "text-white" : "text-gray-600"
                  )} />
                  <span className="font-medium text-sm whitespace-nowrap">
                    {item.label}
                  </span>
                </div>
                <svg className={cn(
                  "h-4 w-4 opacity-0 group-hover:opacity-100 transition-opacity",
                  item.id === 'create' ? "text-white" : "text-gray-400"
                )} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" />
                </svg>
              </button>
            );
          })}
        </div>

        {/* Footer Section */}
        <div className="p-6 space-y-4">
          {/* User Info */}
          {user && (
            <div className="bg-gray-50 rounded-lg p-4 space-y-2">
              <div className="flex items-center space-x-3">
                <div className="flex items-center justify-center w-8 h-8 bg-blue-600 rounded-full">
                  <User className="h-4 w-4 text-white" />
                </div>
                <div className="flex-1 min-w-0">
                  <p className="text-sm font-medium text-gray-900 truncate">
                    {user.firstName} {user.lastName}
                  </p>
                  <p className="text-xs text-gray-500 truncate">
                    {user.email}
                  </p>
                </div>
              </div>
              <div className="flex justify-between items-center">
                <Badge 
                  variant={user.role === 'ADMIN' ? 'default' : user.role === 'MANAGER' ? 'secondary' : 'outline'}
                  className="text-xs"
                >
                  {user.role}
                </Badge>
                <span className="text-xs text-gray-400">
                  {user.isActive ? 'Active' : 'Inactive'}
                </span>
              </div>
            </div>
          )}

          {/* Feedback Card - matches Figma */}
          <div
            className="w-full rounded-2xl overflow-hidden"
            style={{
              borderRadius: 16,
              backgroundImage: 'url(/images/sidebar-feedback-bg.jpg)',
              backgroundPosition: '50% 50%',
              backgroundSize: 'cover',
              backgroundRepeat: 'no-repeat',
            }}
          >
            <div className="flex flex-col justify-center items-start gap-6 p-4 text-white self-stretch">
              {/* Logo */}
              <svg
                width="34"
                height="34"
                viewBox="0 0 34 34"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                aria-hidden="true"
              >
                <path d="M15.3337 25.7171C15.3548 24.9968 15.5236 24.5096 15.9032 24.0224C16.2829 23.514 16.9367 23.175 17.7171 23.175C18.4975 23.175 19.0248 23.4292 19.3623 23.8105C19.7841 24.2766 20.0161 24.9121 20.0372 25.7171H15.3337ZM17.7593 21.0566C16.2618 21.0566 15.1017 21.6074 14.2792 22.4336C13.2246 23.514 12.6973 25.0604 12.6973 26.8186C12.6973 28.5769 13.2878 30.1445 14.3846 31.2037C15.2494 32.0299 16.3251 32.5383 17.8226 32.5383C19.2146 32.5383 20.5645 32.0934 21.4926 31.013C21.9144 30.5046 22.3573 29.6361 22.4206 29.0006H19.8896C19.7841 29.4031 19.5943 29.6996 19.3623 29.9327C18.9826 30.314 18.5186 30.4622 17.7804 30.4622C17.0422 30.4622 16.536 30.1445 16.1774 29.8055C15.6501 29.2971 15.3548 28.4922 15.3759 27.666H22.6526C22.6526 27.433 22.6737 26.9246 22.6737 26.9246C22.7159 25.5688 22.526 24.3189 21.7246 23.1115C20.8387 21.7133 19.3623 21.0566 17.7593 21.0566Z" fill="#3DAE2B"/>
                <path d="M4.70337 27.8992V25.6537H6.81255C8.18352 25.6537 9.38575 26.3528 9.38575 27.878C9.38575 29.2762 8.37335 30.0812 7.06565 30.0812C5.75796 30.0812 4.80883 29.3185 4.70337 27.8992ZM4.70337 19.4257H7.06565C8.2257 19.4257 9.06938 20.2942 9.06938 21.3534C9.06938 22.7304 8.2468 23.3235 6.81255 23.3235H4.70337V19.4257ZM27.124 1.80078H2.06689V17.5615V27.8992C2.15126 30.6531 4.34481 32.4114 7.04456 32.4114C9.74432 32.4114 12.0433 30.865 12.0433 27.9204C12.0433 26.3952 11.1575 24.8911 9.63886 24.4674C10.9676 24.0014 11.748 22.6456 11.748 21.3111C11.748 18.769 9.72322 17.1167 7.06565 17.1167H4.59791V4.34284H27.124C28.284 4.34284 29.2121 5.27492 29.2121 6.44003V29.0643H23.7493V31.6276H31.7642V6.44003C31.7642 3.87679 29.6972 1.80078 27.124 1.80078Z" fill="white"/>
              </svg>

              {/* Title */}
              <h3
                className="text-white text-base font-semibold leading-[1.4] max-w-[260px] self-stretch"
                style={{ fontFamily: 'Poppins, ui-sans-serif, system-ui' }}
              >
                Report any problems, bugs, or feedback.
              </h3>

              {/* Button */}
              <button className="bg-white text-gray-900 px-4 py-2 rounded-xl font-medium text-sm hover:bg-gray-100 transition-colors">
                Contact Us
              </button>
            </div>
          </div>

          {/* Logout */}
          <button 
            onClick={handleLogout}
            className="w-full flex items-center space-x-2 text-gray-500 hover:text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-50 transition-colors"
          >
            <svg className="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
            </svg>
            <span className="font-medium text-sm">Logout</span>
          </button>
        </div>
      </nav>
    </div>
  );
};
